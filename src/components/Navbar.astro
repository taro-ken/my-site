---
import BooksMarks from "./BooksMarks.astro";
import Works from "./Works.astro";
import Articles from "./Articles.astro";
import NavButton from "./index/NavButton.astro";
import SectionContainer from "./SectionContainer.astro";
import Contact from "./Contact.astro";
import ShopNow from "./ShopNow.astro";
import { getI18N } from "@/i18n";

//Para cambiar idioma de textos
const { currentLocale } = Astro;
const i18n = getI18N({ currentLocale });
---

<div class="flex flex-col">
  <nav
    class="flex gap-1 text-hub-inactive rounded-full border-[0.5px] p-1 border-hub-border dark:border-hub-border-dark bg-hub-background-nav dark:bg-hub-background-nav whitespace-nowrap overflow-x-auto scrollbar-hide text-xs md:text-sm lg:text-base origin-left w-full"
  >
    <NavButton class="tab-btn" aria-label="btn-about" data-target="about"
      >About</NavButton
    >
    <NavButton class="tab-btn" aria-label="btn-works" data-target="works"
      >Works</NavButton
    >
    <NavButton
      class="tab-btn"
      aria-label="btn-essential-items"
      data-target="essentialItems">Items</NavButton
    >
    <NavButton
      class="tab-btn"
      aria-label="btn-contact"
      data-target="contact">Contact</NavButton
    >
    <NavButton class="tab-btn" aria-label="btn-services" data-target="shopNow"
      >Services</NavButton
    >
  </nav>

  <style>
    /* タブボタンの強調効果を完全に無効化 */
    .tab-btn {
      background: transparent !important;
      box-shadow: none !important;
      font-weight: normal !important;
      color: inherit !important;
    }
    
    .tab-btn:hover {
      background: transparent !important;
      color: inherit !important;
    }
    
    .tab-btn:active {
      background: transparent !important;
      color: inherit !important;
    }
    
    .tab-btn:focus {
      background: transparent !important;
      color: inherit !important;
      outline: none !important;
    }
  </style>

  <main class="mt-6">
    <SectionContainer id="about" class="tab-content mt-0 mb-0">
      <div class="flex flex-col gap-2">
        <p class="text-hub-subtitle dark:text-hub-subtitle-dark text-sm">
          東京在住のソフトウェアエンジニア。モバイル（iOS/Flutter）を中心に、ガジェット×生産性×健康の交差点でプロダクトづくりと発信を行っています。
        </p>
        <p class="text-hub-subtitle dark:text-hub-subtitle-dark text-sm">
          最近は個人開発アプリやUIライブラリ、ツールづくりに注力。好きなものは筋トレとカメラ、快適なデスク環境づくり。
        </p>
      </div>
    </SectionContainer>
    <SectionContainer id="works" class="tab-content hidden mt-0 mb-0">
      <Works />
    </SectionContainer>
    <SectionContainer id="essentialItems" class="tab-content hidden mt-0 mb-0">
      <BooksMarks />
    </SectionContainer>
    <SectionContainer id="contact" class="tab-content hidden mt-0 mb-0">
      <Contact />
    </SectionContainer>
    <SectionContainer id="shopNow" class="tab-content hidden mt-0 mb-0">
      <ShopNow />
    </SectionContainer>
  </main>
</div>

<script>
  const buttons = document.querySelectorAll(".tab-btn");
  const contents = document.querySelectorAll(".tab-content");

  // デフォルトでAboutタブを表示
  const aboutSection = document.getElementById("about");
  if (aboutSection) {
    aboutSection.classList.remove("hidden");
  }

  buttons.forEach((button) => {
    button.addEventListener("click", () => {
      const target = button.getAttribute("data-target");

      // 全てのセクションを非表示
      contents.forEach((content) => content.classList.add("hidden"));

      // 選択されたセクションを表示
      if (target) {
        const targetElement = document.getElementById(target);
        if (targetElement) {
          targetElement.classList.remove("hidden");
        }
      }

      // ボタンを中央にスクロール
      button.scrollIntoView({
        behavior: "smooth",
        block: "nearest",
        inline: "center",
      });
    });
  });
</script>
